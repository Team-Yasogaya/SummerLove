using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;

namespace NoName {
    public class ConfirmationModalUI : MonoBehaviour
    {
        [SerializeField] private TextMeshProUGUI _modalText;
        [SerializeField] private Button _confirmButton;
        [SerializeField] private Button _cancelButton;

        public event Action OnConfirm;
        public event Action OnCancel;

        protected override void Awake()
        {
            base.Awake();

            _confirmButton.onClick.AddListener(() => OnConfirm?.Invoke());
            _cancelButton.onClick.AddListener(() => OnCancel?.Invoke());

            ResetConfirmActions();
            ResetCancelActions();

            CloseModalBox();
        }

        public void SetModalText(string text)
        {
            _modalText.text = text;
        }

        public void Show(string text) 
        {
            SetModalText(text);
            gameObject.SetActive(true);
        }

        public void CloseModalBox()
        {
            gameObject.SetActive(false);
        }

        public void ResetConfirmActions()
        {
            OnConfirm = null;
            OnConfirm += CloseModalBox;
        }

        public void ResetCancelActions()
        {
            OnCancel = null;
            OnCancel += ResetConfirmActions;
            OnCancel += CloseModalBox;
        }
    }
}